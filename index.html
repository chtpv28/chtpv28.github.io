<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –°–µ–ø—Å–∏—Å–∞ PWA</title>
    <meta name="theme-color" content="#667eea">
    <meta name="description" content="PWA –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–µ–ø—Å–∏—Å–∞ —Å SOS –∏ omqSOFA">
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogItCa0LDQu9C10L3RgtCw0Y8g0YHQtdC/0LhRgdCwIiwKICAic2hvcnRfbmFtZSI6ICJTZXBzaXNDYWxjIiwKICAiZGVzY3JpcHRpb24iOiAi0JrQsNC70LXQvdGC0LDRjyDQsdC10L/QuFGB0LAg0LrQsNC60LjRgdCw0L3RgtCw0Y8g0LIg0YHRhdC10LnRgiBTT1Mg0L4gb21xU09GQSIsCiAgInN0YXJ0X3VybCI6ICIuIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjNjY3ZWVhIiwKICAidGhlbWVfY29sb3IiOiAiIzY2N2VlYSIsCiAgImljb25zIjogWwogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBREVBQUFBdENBWUFBQURqM1Q5NEFBQUFBWE5TUjBJQXJzNGM2UUFBQUNKSlJFRlVlQUh0bloyMUFBQ3cwVWxFUVZSNG5PM1o4cjNNVFlXSkpvYVl4WkNabGNtRm1jVlViN0tkR0hnczJCMTlDVFZqak11czIxQlJYUmN3MlI5d01SazdEaGQzNlNiRXB3VXB1c0tCSFhWdXRrZG54cVlxOGVpVmppZmJMSWtZa1h5WUpqa2VpYzRVZVlJWW1TWmtQVVl1WUpSaUtpUUp5WWtZWll5a0srY2dvS0dvVVJBZ0JRbUlRQVFvR0tRSkJJZ0d1TWdZQUUyQVJtZ0FHc0lBd0NBQUFnQ0J3QUdRa0JJQ0I3S1FJQUp6b2dBQUFBQVNVVk9SSzVDWUlJPSIsCiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIgogICAgfQogIF0KfQ==">
    
    <!-- iOS –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–°–µ–ø—Å–∏—Å –ö–∞–ª—å–∫">
    
    <style>
        /* –°–ë–†–û–° –ò –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #667eea;
            --primary-dark: #5a67d8;
            --secondary: #f093fb;
            --success: #34c759;
            --warning: #ff9500;
            --danger: #ff3b30;
            --dark: #1d1d1f;
            --light: #f5f5f7;
            --border: #e5e5e7;
            --radius: 12px;
            --shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        
        [data-theme="dark"] {
            --primary: #7c8efa;
            --light: #1c1c1e;
            --dark: #f5f5f7;
            --border: #2c2c2e;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--light);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            transition: background 0.3s, color 0.3s;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) 
                     env(safe-area-inset-bottom) env(safe-area-inset-left);
        }
        
        /* PWA –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø */
        #installPrompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            border: 2px solid var(--primary);
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        #offlineAlert {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--danger);
            color: white;
            padding: 12px;
            text-align: center;
            display: none;
            z-index: 999;
            font-weight: 500;
        }
        
        /* –ö–û–ù–¢–ï–ô–ù–ï–† */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* –®–ê–ü–ö–ê */
        header {
            background: linear-gradient(135deg, var(--primary), #764ba2);
            color: white;
            padding: 25px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: 'PWA';
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.2);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .subtitle {
            opacity: 0.9;
            font-size: 14px;
        }
        
        /* –ö–ù–û–ü–ö–ò PWA */
        .pwa-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .pwa-btn {
            padding: 8px 16px;
            border: 2px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.1);
            color: white;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
        }
        
        .pwa-btn:hover {
            background: rgba(255,255,255,0.2);
        }
        
        /* –í–ö–õ–ê–î–ö–ò */
        .tabs {
            display: flex;
            background: white;
            border-radius: var(--radius);
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }
        
        .tab {
            flex: 1;
            padding: 16px;
            border: none;
            background: white;
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
            font-weight: 600;
        }
        
        /* –°–û–î–ï–†–ñ–ò–ú–û–ï –í–ö–õ–ê–î–û–ö */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* –ö–ê–†–¢–û–ß–ö–ò */
        .card {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }
        
        .card h2 {
            margin-bottom: 20px;
            color: var(--dark);
            font-size: 18px;
        }
        
        /* –í–í–û–î –î–ê–ù–ù–´–• */
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .input-group label {
            font-weight: 500;
            font-size: 14px;
        }
        
        .input-group input, .input-group select {
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.2s;
        }
        
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .unit {
            font-size: 13px;
            color: #666;
            margin-left: 4px;
        }
        
        /* –¢–û–ì–ì–õ–´ */
        .toggle-group {
            display: flex;
            gap: 8px;
        }
        
        .toggle-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid var(--border);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }
        
        .toggle-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        /* –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô */
        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
            flex: 1;
        }
        
        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: 1px solid var(--border);
        }
        
        /* –†–ï–ó–£–õ–¨–¢–ê–¢–´ */
        .results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .result-card {
            border-left: 4px solid var(--primary);
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .score {
            font-size: 36px;
            font-weight: 700;
        }
        
        .score-max {
            color: #666;
            font-size: 16px;
        }
        
        /* –ë–ï–ô–î–ñ–ò –†–ò–°–ö–û–í */
        .risk {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .risk-low { background: var(--success); color: white; }
        .risk-medium { background: var(--warning); color: white; }
        .risk-high { background: var(--danger); color: white; }
        .risk-critical { background: var(--dark); color: white; }
        
        /* –ò–°–¢–û–†–ò–Ø */
        .history-item {
            padding: 15px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .empty {
            text-align: center;
            padding: 40px;
            color: #666;
            font-style: italic;
        }
        
        /* –ò–ù–§–û */
        .feature-list {
            list-style: none;
            margin: 15px 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .feature-list li::before {
            content: '‚úì';
            color: var(--success);
            font-weight: bold;
        }
        
        /* –§–£–¢–ï–† */
        footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            text-align: center;
            color: #666;
            font-size: 14px;
        }
        
        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
        @media (max-width: 600px) {
            .container { padding: 15px; }
            .input-grid { grid-template-columns: 1fr; }
            .results { grid-template-columns: 1fr; }
            .actions { flex-direction: column; }
            .tabs { flex-direction: column; }
        }
        
        /* PWA –°–¢–ê–¢–£–° –ë–ê–† */
        @media (display-mode: standalone) {
            header { margin-top: env(safe-area-inset-top); }
            body { padding-top: calc(env(safe-area-inset-top) + 20px); }
        }
    </style>
</head>
<body>
    <!-- PWA –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
    <div id="installPrompt">
        <p style="margin-bottom: 15px; font-weight: 600;">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?</p>
        <p style="margin-bottom: 15px; font-size: 14px; color: #666;">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏ —Ä–∞–±–æ—Ç—ã –≤ –æ—Ñ—Ñ–ª–∞–π–Ω–µ</p>
        <div style="display: flex; gap: 10px;">
            <button id="installCancel" class="btn-secondary" style="flex: 1;">–ü–æ–∑–∂–µ</button>
            <button id="installConfirm" class="btn-primary" style="flex: 1;">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        </div>
    </div>
    
    <div id="offlineAlert">üì∂ –í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –æ—Ñ—Ñ–ª–∞–π–Ω</div>
    
    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† -->
    <div class="container">
        <!-- –®–ê–ü–ö–ê -->
        <header>
            <h1>üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –°–µ–ø—Å–∏—Å–∞</h1>
            <div class="subtitle">PWA ‚Ä¢ SOS + omqSOFA ‚Ä¢ –û—Ñ—Ñ–ª–∞–π–Ω</div>
            
            <div class="pwa-controls">
                <button id="installBtn" class="pwa-btn" style="display: none;">
                    üì≤ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
                </button>
                <button id="themeBtn" class="pwa-btn">
                    üåô –¢–µ–º–∞
                </button>
                <button id="shareBtn" class="pwa-btn">
                    ‚ÜóÔ∏è –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                </button>
            </div>
        </header>
        
        <!-- –í–ö–õ–ê–î–ö–ò -->
        <div class="tabs">
            <button class="tab active" data-tab="calc">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</button>
            <button class="tab" data-tab="history">–ò—Å—Ç–æ—Ä–∏—è</button>
            <button class="tab" data-tab="info">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</button>
        </div>
        
        <!-- –í–ö–õ–ê–î–ö–ê –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê -->
        <section id="calc" class="tab-content active">
            <!-- –ü–ê–†–ê–ú–ï–¢–†–´ -->
            <div class="card">
                <h2>üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞—Ü–∏–µ–Ω—Ç–∞</h2>
                
                <div class="input-grid">
                    <div class="input-group">
                        <label>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ <span class="unit">¬∞C</span></label>
                        <input type="number" id="temp" placeholder="36.6" step="0.1">
                    </div>
                    
                    <div class="input-group">
                        <label>–ß–°–° <span class="unit">—É–¥/–º–∏–Ω</span></label>
                        <input type="number" id="hr" placeholder="80">
                    </div>
                    
                    <div class="input-group">
                        <label>–ß–î–î <span class="unit">–¥—ã—Ö/–º–∏–Ω</span></label>
                        <input type="number" id="rr" placeholder="16">
                    </div>
                    
                    <div class="input-group">
                        <label>–ê–î —Å–∏—Å—Ç. <span class="unit">–º–º —Ä—Ç.—Å—Ç.</span></label>
                        <input type="number" id="sbp" placeholder="120">
                    </div>
                    
                    <div class="input-group">
                        <label>–°–∞—Ç—É—Ä–∞—Ü–∏—è <span class="unit">%</span></label>
                        <input type="number" id="spo2" placeholder="98" min="70" max="100">
                    </div>
                    
                    <div class="input-group">
                        <label>–õ–µ–π–∫–æ—Ü–∏—Ç—ã <span class="unit">√ó10‚Åπ/–ª</span></label>
                        <input type="number" id="wbc" placeholder="8.0" step="0.1">
                    </div>
                    
                    <div class="input-group">
                        <label>–õ–∞–∫—Ç–∞—Ç <span class="unit">–º–º–æ–ª—å/–ª</span></label>
                        <input type="number" id="lactate" placeholder="1.0" step="0.1">
                    </div>
                    
                    <div class="input-group">
                        <label>–ë–æ–ª—å –≤ –∂–∏–≤–æ—Ç–µ</label>
                        <div class="toggle-group">
                            <button class="toggle-btn active" data-id="pain" data-value="no">–ù–µ—Ç</button>
                            <button class="toggle-btn" data-id="pain" data-value="yes">–î–∞</button>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>–£—Ä–æ–≤–µ–Ω—å —Å–æ–∑–Ω–∞–Ω–∏—è</label>
                        <div class="toggle-group">
                            <button class="toggle-btn active" data-id="confusion" data-value="no">–ù–µ—Ç</button>
                            <button class="toggle-btn" data-id="confusion" data-value="yes">–î–∞</button>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>–î–∏—É—Ä–µ–∑</label>
                        <select id="diuresis">
                            <option value="normal">–ù–æ—Ä–º–∞–ª—å–Ω—ã–π</option>
                            <option value="reduced">–°–Ω–∏–∂–µ–Ω–Ω—ã–π</option>
                            <option value="oliguria">–û–ª–∏–≥—É—Ä–∏—è</option>
                        </select>
                    </div>
                </div>
                
                <div class="actions">
                    <button id="calculateBtn" class="btn btn-primary">üßÆ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                    <button id="clearBtn" class="btn btn-secondary">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                    <button id="demoBtn" class="btn btn-secondary">üß™ –î–µ–º–æ</button>
                </div>
            </div>
            
            <!-- –†–ï–ó–£–õ–¨–¢–ê–¢–´ -->
            <div class="results">
                <div class="card result-card">
                    <div class="result-header">
                        <h3>SOS Score</h3>
                        <div>
                            <span class="score" id="sosScore">0</span>
                            <span class="score-max">/11</span>
                        </div>
                    </div>
                    <div class="risk risk-low" id="sosRisk">–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫</div>
                    <div id="sosDetails"></div>
                </div>
                
                <div class="card result-card">
                    <div class="result-header">
                        <h3>omqSOFA</h3>
                        <div>
                            <span class="score" id="qsofaScore">0</span>
                            <span class="score-max">/6</span>
                        </div>
                    </div>
                    <div class="risk risk-low" id="qsofaRisk">–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫</div>
                    <div id="qsofaDetails"></div>
                </div>
            </div>
            
            <!-- –î–ï–ô–°–¢–í–ò–Ø -->
            <div class="card">
                <h2>üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
                <div id="interpretation" style="min-height: 60px; padding: 10px 0;">
                    <p style="color: #666; font-style: italic;">–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞</p>
                </div>
                <div class="actions">
                    <button id="saveBtn" class="btn btn-secondary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button id="exportBtn" class="btn btn-secondary">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>
                </div>
            </div>
        </section>
        
        <!-- –í–ö–õ–ê–î–ö–ê –ò–°–¢–û–†–ò–ò -->
        <section id="history" class="tab-content">
            <div class="card">
                <h2>üìö –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤</h2>
                <div id="historyList" style="max-height: 400px; overflow-y: auto;">
                    <p class="empty">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</p>
                </div>
                <div class="actions" style="margin-top: 20px;">
                    <button id="clearHistoryBtn" class="btn btn-secondary">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                </div>
            </div>
        </section>
        
        <!-- –í–ö–õ–ê–î–ö–ê –ò–ù–§–û -->
        <section id="info" class="tab-content">
            <div class="card">
                <h2>‚ÑπÔ∏è –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h2>
                
                <div style="margin: 20px 0;">
                    <h3 style="margin-bottom: 10px;">üöÄ PWA –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h3>
                    <ul class="feature-list">
                        <li>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω</li>
                        <li>–†–∞–±–æ—Ç–∞ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞</li>
                        <li>–ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞</li>
                        <li>Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</li>
                        <li>–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å</li>
                    </ul>
                </div>
                
                <div style="margin: 20px 0;">
                    <h3 style="margin-bottom: 10px;">üìä –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —à–∫–∞–ª—ã</h3>
                    <p><strong>SOS:</strong> Sepsis Obstetric Score –¥–ª—è –±–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö</p>
                    <p><strong>omqSOFA:</strong> obstetric modified qSOFA</p>
                </div>
                
                <div style="margin: 20px 0; padding: 15px; background: #f5f5f7; border-radius: 8px;">
                    <p style="font-size: 13px; color: #666;">
                        <strong>üí° –°–æ–≤–µ—Ç:</strong> –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
                    </p>
                </div>
                
                <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
                    <p style="font-size: 13px; color: #666;">–í–µ—Ä—Å–∏—è 1.0 ‚Ä¢ PWA ‚Ä¢ –î–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π</p>
                </div>
            </div>
        </section>
        
        <!-- –§–£–¢–ï–† -->
        <footer>
            <div style="margin-bottom: 10px;">
                <span id="status">üåê –û–Ω–ª–∞–π–Ω</span> ‚Ä¢ 
                <span id="storage">üíæ 0 KB</span>
            </div>
            <p>–°–æ–∑–¥–∞–Ω–æ TPV ‚Ä¢ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ</p>
        </footer>
    </div>

    <script>
        // ==================== PWA –§–£–ù–ö–¶–ò–û–ù–ê–õ ====================
        
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ HTML)
        if ('serviceWorker' in navigator) {
            const swCode = `
                self.addEventListener('install', e => {
                    e.waitUntil(caches.open('sepsis-v1').then(cache => 
                        cache.addAll(['/'])
                    ));
                });
                
                self.addEventListener('fetch', e => {
                    e.respondWith(
                        caches.match(e.request).then(response => 
                            response || fetch(e.request)
                        )
                    );
                });
            `;
            
            const blob = new Blob([swCode], { type: 'application/javascript' });
            const swUrl = URL.createObjectURL(blob);
            
            navigator.serviceWorker.register(swUrl)
                .then(() => console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
                .catch(err => console.log('‚ùå –û—à–∏–±–∫–∞ SW:', err));
        }
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installBtn').style.display = 'flex';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–º–ø—Ç —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (deferredPrompt && !localStorage.getItem('installDismissed')) {
                    document.getElementById('installPrompt').style.display = 'block';
                }
            }, 5000);
        });
        
        document.getElementById('installBtn').onclick = () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then(choice => {
                    if (choice.outcome === 'accepted') {
                        console.log('‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–∏–ª PWA');
                        document.getElementById('installBtn').style.display = 'none';
                    }
                    deferredPrompt = null;
                });
            }
        };
        
        document.getElementById('installConfirm').onclick = () => {
            document.getElementById('installPrompt').style.display = 'none';
            if (deferredPrompt) deferredPrompt.prompt();
        };
        
        document.getElementById('installCancel').onclick = () => {
            document.getElementById('installPrompt').style.display = 'none';
            localStorage.setItem('installDismissed', 'true');
        };
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        document.getElementById('themeBtn').onclick = () => {
            const isDark = document.body.getAttribute('data-theme') === 'dark';
            document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
            localStorage.setItem('theme', isDark ? 'light' : 'dark');
        };
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–º—ã
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.body.setAttribute('data-theme', savedTheme);
        
        // –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
        document.getElementById('shareBtn').onclick = async () => {
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: '–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–µ–ø—Å–∏—Å–∞',
                        text: 'PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∏—Å–∫–∞ —Å–µ–ø—Å–∏—Å–∞',
                        url: window.location.href
                    });
                } catch (err) {
                    console.log('–û—à–∏–±–∫–∞ sharing:', err);
                }
            } else {
                alert('–§—É–Ω–∫—Ü–∏—è "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
            }
        };
        
        // ==================== –õ–û–ì–ò–ö–ê –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê ====================
        
        class Calculator {
            constructor() {
                this.init();
            }
            
            init() {
                this.setupListeners();
                this.loadHistory();
                this.updateStatus();
            }
            
            setupListeners() {
                // –ê–≤—Ç–æ—Ä–∞—Å—á–µ—Ç
                document.querySelectorAll('input, select').forEach(el => {
                    el.addEventListener('input', () => this.calculate());
                });
                
                // –¢–æ–≥–≥–ª—ã
                document.querySelectorAll('.toggle-btn').forEach(btn => {
                    btn.onclick = (e) => {
                        const group = e.target.dataset.id;
                        document.querySelectorAll(`[data-id="${group}"]`).forEach(b => 
                            b.classList.remove('active')
                        );
                        e.target.classList.add('active');
                        this.calculate();
                    };
                });
                
                // –ö–Ω–æ–ø–∫–∏
                document.getElementById('calculateBtn').onclick = () => this.calculate();
                document.getElementById('clearBtn').onclick = () => this.clear();
                document.getElementById('demoBtn').onclick = () => this.demo();
                document.getElementById('saveBtn').onclick = () => this.save();
                document.getElementById('exportBtn').onclick = () => this.export();
                document.getElementById('clearHistoryBtn').onclick = () => this.clearHistory();
                
                // –í–∫–ª–∞–¥–∫–∏
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.onclick = (e) => {
                        const tabName = e.target.dataset.tab;
                        this.switchTab(tabName);
                    };
                });
                
                // –û–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å
                window.addEventListener('online', () => this.updateStatus());
                window.addEventListener('offline', () => this.updateStatus());
            }
            
            getParams() {
                return {
                    temp: parseFloat(document.getElementById('temp').value) || null,
                    hr: parseInt(document.getElementById('hr').value) || null,
                    rr: parseInt(document.getElementById('rr').value) || null,
                    sbp: parseInt(document.getElementById('sbp').value) || null,
                    spo2: parseInt(document.getElementById('spo2').value) || null,
                    wbc: parseFloat(document.getElementById('wbc').value) || null,
                    lactate: parseFloat(document.getElementById('lactate').value) || null,
                    pain: document.querySelector('[data-id="pain"].active')?.dataset.value || 'no',
                    confusion: document.querySelector('[data-id="confusion"].active')?.dataset.value || 'no',
                    diuresis: document.getElementById('diuresis').value
                };
            }
            
            calculateSOS(params) {
                let score = 0;
                let details = [];
                
                // –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
                if (params.temp !== null) {
                    let points = 0;
                    if (params.temp >= 35.0 && params.temp <= 35.9) points = 1;
                    else if (params.temp >= 38.1 && params.temp <= 39.0) points = 2;
                    else if (params.temp > 39.0) points = 3;
                    score += points;
                    details.push(`–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${points} –±–∞–ª–ª${points !== 1 ? '–∞' : ''}`);
                }
                
                // –ß–°–°
                if (params.hr !== null) {
                    let points = 0;
                    if (params.hr >= 90 && params.hr <= 99) points = 1;
                    else if (params.hr >= 100) points = 2;
                    score += points;
                    details.push(`–ß–°–°: ${points} –±–∞–ª–ª${points !== 1 ? '–∞' : ''}`);
                }
                
                // –ß–î–î –¥–ª—è SOS
                if (params.rr !== null) {
                    let points = 0;
                    if (params.rr >= 21 && params.rr <= 24) points = 1;
                    else if (params.rr >= 25) points = 2;
                    score += points;
                    details.push(`–ß–î–î (SOS): ${points} –±–∞–ª–ª${points !== 1 ? '–∞' : ''}`);
                }
                
                // –õ–µ–π–∫–æ—Ü–∏—Ç—ã
                if (params.wbc != null) {
                    let points = 0;
                    if (params.wbc > 39.9 || params.wbc < 1) points = 4;
                    else if ((params.wbc >= 25 && params.wbc <= 39.9) || (params.wbc >= 1 && params.wbc <= 2.9)) points = 2;
                    else if ((params.wbc >= 17 && params.wbc <= 24.9) || (params.wbc >= 3 && params.wbc <= 5.6)) points = 1;
        // –î–∏–∞–ø–∞–∑–æ–Ω 5.7-16.9 –æ—Å—Ç–∞–µ—Ç—Å—è 0 –±–∞–ª–ª–æ–≤
    }
                
                // –ë–æ–ª—å –≤ –∂–∏–≤–æ—Ç–µ
                let painPoints = params.pain === 'yes' ? 2 : 0;
                score += painPoints;
                details.push(`–ë–æ–ª—å: ${painPoints} –±–∞–ª–ª${painPoints !== 1 ? '–∞' : ''}`);
                
                return { score, details, max: 11 };
            }
            
            calculateOmqSOFA(params) {
                let score = 0;
                let details = [];
                
                // –ê–î
                if (params.sbp !== null) {
                    let points = params.sbp <= 100 ? 1 : 0;
                    score += points;
                    details.push(`–ê–î: ${points} –±–∞–ª–ª`);
                }
                
                // –ß–î–î –¥–ª—è omqSOFA
                if (params.rr !== null) {
                    let points = params.rr >= 22 ? 1 : 0;
                    score += points;
                    details.push(`–ß–î–î (omqSOFA): ${points} –±–∞–ª–ª`);
                }
                
                // –°–æ–∑–Ω–∞–Ω–∏–µ
                let confusionPoints = params.confusion === 'yes' ? 1 : 0;
                score += confusionPoints;
                details.push(`–°–æ–∑–Ω–∞–Ω–∏–µ: ${confusionPoints} –±–∞–ª–ª`);
                
                // –°–∞—Ç—É—Ä–∞—Ü–∏—è
                if (params.spo2 !== null) {
                    let points = params.spo2 < 95 ? 1 : 0;
                    score += points;
                    details.push(`–°–∞—Ç—É—Ä–∞—Ü–∏—è: ${points} –±–∞–ª–ª`);
                }
                
                // –î–∏—É—Ä–µ–∑
                let diuresisPoints = 0;
                if (params.diuresis === 'reduced') diuresisPoints = 1;
                else if (params.diuresis === 'oliguria') diuresisPoints = 2;
                score += diuresisPoints;
                details.push(`–î–∏—É—Ä–µ–∑: ${diuresisPoints} –±–∞–ª–ª${diuresisPoints !== 1 ? '–∞' : ''}`);
                
                // –õ–∞–∫—Ç–∞—Ç
                if (params.lactate !== null) {
                    let points = 0;
                    if (params.lactate >= 2.0 && params.lactate <= 3.9) points = 1;
                    else if (params.lactate >= 4.0) points = 2;
                    score += points;
                    details.push(`–õ–∞–∫—Ç–∞—Ç: ${points} –±–∞–ª–ª${points !== 1 ? '–∞' : ''}`);
                }
                
                return { score, details, max: 6 };
            }
            
            calculate() {
                const params = this.getParams();
                const sos = this.calculateSOS(params);
                const qsofa = this.calculateOmqSOFA(params);
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
                document.getElementById('sosScore').textContent = sos.score;
                document.getElementById('qsofaScore').textContent = qsofa.score;
                
                document.getElementById('sosDetails').innerHTML = 
                    sos.details.map(d => `<div style="padding: 4px 0; font-size: 14px;">${d}</div>`).join('');
                
                document.getElementById('qsofaDetails').innerHTML = 
                    qsofa.details.map(d => `<div style="padding: 4px 0; font-size: 14px;">${d}</div>`).join('');
                
                // –†–∏—Å–∫–∏
                this.updateRisks(sos.score, qsofa.score);
                
                // –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
                this.updateInterpretation(sos, qsofa);
            }
            
            updateRisks(sosScore, qsofaScore) {
                const sosRisk = this.getRisk(sosScore, 'sos');
                const qsofaRisk = this.getRisk(qsofaScore, 'qsofa');
                
                const sosEl = document.getElementById('sosRisk');
                sosEl.textContent = sosRisk.text;
                sosEl.className = `risk risk-${sosRisk.level}`;
                
                const qsofaEl = document.getElementById('qsofaRisk');
                qsofaEl.textContent = qsofaRisk.text;
                qsofaEl.className = `risk risk-${qsofaRisk.level}`;
            }
            
            getRisk(score, type) {
                if (type === 'sos') {
                    if (score === 0) return { level: 'low', text: '–ù–∏–∑–∫–∏–π' };
                    if (score <= 3) return { level: 'medium', text: '–°—Ä–µ–¥–Ω–∏–π' };
                    if (score <= 5) return { level: 'high', text: '–í—ã—Å–æ–∫–∏–π' };
                    return { level: 'critical', text: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π' };
                } else {
                    if (score === 0) return { level: 'low', text: '–ù–∏–∑–∫–∏–π' };
                    if (score === 1) return { level: 'medium', text: '–°—Ä–µ–¥–Ω–∏–π' };
                    if (score === 2) return { level: 'high', text: '–í—ã—Å–æ–∫–∏–π' };
                    return { level: 'critical', text: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π' };
                }
            }
            
            updateInterpretation(sos, qsofa) {
                const el = document.getElementById('interpretation');
                
                if (sos.score === 0 && qsofa.score === 0) {
                    el.innerHTML = '<p style="color: #666; font-style: italic;">–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞</p>';
                    return;
                }
                
                let html = `<p><strong>SOS:</strong> ${sos.score} –±–∞–ª–ª–æ–≤</p>`;
                html += `<p><strong>omqSOFA:</strong> ${qsofa.score} –±–∞–ª–ª–æ–≤</p>`;
                
                if (sos.score >= 6 || qsofa.score >= 3) {
                    html += `<p style="color: #ff3b30; margin-top: 10px; font-weight: 600;">
                        üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫! –¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ä–æ—á–Ω–∞—è –≥–æ—Å–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è
                    </p>`;
                } else if (sos.score >= 4 || qsofa.score >= 2) {
                    html += `<p style="color: #ff9500; margin-top: 10px; font-weight: 600;">
                        ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫! –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –≤—Ä–∞—á–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞
                    </p>`;
                }
                
                el.innerHTML = html;
            }
            
            clear() {
                document.querySelectorAll('input').forEach(i => i.value = '');
                document.getElementById('diuresis').value = 'normal';
                document.querySelectorAll('.toggle-btn').forEach(btn => {
                    if (btn.dataset.value === 'no') btn.classList.add('active');
                    else btn.classList.remove('active');
                });
                this.calculate();
            }
            
            demo() {
                document.getElementById('temp').value = 39.2;
                document.getElementById('hr').value = 115;
                document.getElementById('rr').value = 26;
                document.getElementById('sbp').value = 95;
                document.getElementById('spo2').value = 92;
                document.getElementById('wbc').value = 17.5;
                document.getElementById('lactate').value = 3.8;
                
                document.querySelector('[data-id="pain"][data-value="yes"]').click();
                document.querySelector('[data-id="confusion"][data-value="yes"]').click();
                document.getElementById('diuresis').value = 'reduced';
                
                this.calculate();
                alert('–ó–∞–≥—Ä—É–∂–µ–Ω—ã –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —Ç—è–∂–µ–ª–æ–≥–æ —Å–ª—É—á–∞—è');
            }
            
            save() {
                const params = this.getParams();
                const sos = this.calculateSOS(params);
                const qsofa = this.calculateOmqSOFA(params);
                
                const result = {
                    id: Date.now(),
                    date: new Date().toLocaleString('ru-RU'),
                    sos: sos.score,
                    qsofa: qsofa.score,
                    params: params
                };
                
                let history = JSON.parse(localStorage.getItem('sepsisHistory') || '[]');
                history.unshift(result);
                if (history.length > 50) history = history.slice(0, 50);
                
                localStorage.setItem('sepsisHistory', JSON.stringify(history));
                this.loadHistory();
                this.updateStatus();
                
                // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                if ('Notification' in window && Notification.permission === 'granted') {
                    new Notification('–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω', {
                        body: `SOS: ${sos.score}, omqSOFA: ${qsofa.score}`,
                        icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTcgMjFMMjEgMTdNMTcuMjUgMTIuMjVMMjEuMjUgOC4yNU0xNiAyMEwxOC41IDIwQzE5LjMyODQgMjAgMjAgMTkuMzI4NCAyMCAxOC41VjUuNUMyMCA0LjY3MTU3IDE5LjMyODQgNCAxOC41IDRINS41QzQuNjcxNTcgNCA0IDQuNjcxNTcgNCA1LjVWMTguNUM0IDE5LjMyODQgNC42NzE1NyAyMCA1LjUgMjBIMTZNMTYgMjBIMTBWMTFMMTYgMjBaIiBzdHJva2U9IiM2NjdlZWEiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+'
                    });
                }
            }
            
            loadHistory() {
                const history = JSON.parse(localStorage.getItem('sepsisHistory') || '[]');
                const list = document.getElementById('historyList');
                
                if (history.length === 0) {
                    list.innerHTML = '<p class="empty">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</p>';
                    return;
                }
                
                list.innerHTML = history.map(item => `
                    <div class="history-item">
                        <div>
                            <div style="font-size: 14px; color: #666;">${item.date}</div>
                            <div>SOS: ${item.sos} ‚Ä¢ omqSOFA: ${item.qsofa}</div>
                        </div>
                        <button onclick="calc.loadHistoryItem(${item.id})" 
                                style="padding: 8px 16px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer;">
                            –ó–∞–≥—Ä—É–∑–∏—Ç—å
                        </button>
                    </div>
                `).join('');
            }
            
            loadHistoryItem(id) {
                const history = JSON.parse(localStorage.getItem('sepsisHistory') || '[]');
                const item = history.find(h => h.id === id);
                
                if (item) {
                    // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è
                    const fields = ['temp', 'hr', 'rr', 'sbp', 'spo2', 'wbc', 'lactate'];
                    fields.forEach(field => {
                        if (item.params[field]) document.getElementById(field).value = item.params[field];
                    });
                    
                    // –¢–æ–≥–≥–ª—ã
                    if (item.params.pain) {
                        document.querySelector(`[data-id="pain"][data-value="${item.params.pain}"]`).click();
                    }
                    if (item.params.confusion) {
                        document.querySelector(`[data-id="confusion"][data-value="${item.params.confusion}"]`).click();
                    }
                    
                    // –°–µ–ª–µ–∫—Ç
                    if (item.params.diuresis) {
                        document.getElementById('diuresis').value = item.params.diuresis;
                    }
                    
                    this.calculate();
                    this.switchTab('calc');
                }
            }
            
            clearHistory() {
                if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é?')) {
                    localStorage.removeItem('sepsisHistory');
                    this.loadHistory();
                    this.updateStatus();
                }
            }
            
            export() {
                const params = this.getParams();
                const sos = this.calculateSOS(params);
                const qsofa = this.calculateOmqSOFA(params);
                
                const data = `
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞ ${new Date().toLocaleString('ru-RU')}

–ü–ê–†–ê–ú–ï–¢–†–´:
–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${params.temp || '-'}¬∞C
–ß–°–°: ${params.hr || '-'} —É–¥/–º–∏–Ω
–ß–î–î: ${params.rr || '-'} –¥—ã—Ö/–º–∏–Ω
–ê–î: ${params.sbp || '-'} –º–º —Ä—Ç.—Å—Ç.
–°–∞—Ç—É—Ä–∞—Ü–∏—è: ${params.spo2 || '-'}%
–õ–µ–π–∫–æ—Ü–∏—Ç—ã: ${params.wbc || '-'}√ó10‚Åπ/–ª
–õ–∞–∫—Ç–∞—Ç: ${params.lactate || '-'} –º–º–æ–ª—å/–ª
–ë–æ–ª—å: ${params.pain === 'yes' ? '–î–∞' : '–ù–µ—Ç'}
–°–æ–∑–Ω–∞–Ω–∏–µ: ${params.confusion === 'yes' ? '–î–∞' : '–ù–µ—Ç'}
–î–∏—É—Ä–µ–∑: ${params.diuresis}

–†–ï–ó–£–õ–¨–¢–ê–¢–´:
SOS: ${sos.score} –±–∞–ª–ª–æ–≤ (${this.getRisk(sos.score, 'sos').text} —Ä–∏—Å–∫)
omqSOFA: ${qsofa.score} –±–∞–ª–ª–æ–≤ (${this.getRisk(qsofa.score, 'qsofa').text} —Ä–∏—Å–∫)

–°–æ–∑–¥–∞–Ω–æ –≤ PWA –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ —Å–µ–ø—Å–∏—Å–∞
                `.trim();
                
                const blob = new Blob([data], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `sepsis-${Date.now()}.txt`;
                a.click();
                URL.revokeObjectURL(url);
            }
            
            switchTab(tabName) {
                // –ö–Ω–æ–ø–∫–∏
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.toggle('active', tab.dataset.tab === tabName);
                });
                
                // –ö–æ–Ω—Ç–µ–Ω—Ç
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.toggle('active', content.id === tabName);
                });
            }
            
            updateStatus() {
                // –û–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å
                const isOnline = navigator.onLine;
                document.getElementById('status').textContent = isOnline ? 'üåê –û–Ω–ª–∞–π–Ω' : 'üì∂ –û—Ñ—Ñ–ª–∞–π–Ω';
                document.getElementById('offlineAlert').style.display = isOnline ? 'none' : 'block';
                
                // –•—Ä–∞–Ω–∏–ª–∏—â–µ
                const history = JSON.parse(localStorage.getItem('sepsisHistory') || '[]');
                const size = JSON.stringify(localStorage).length;
                document.getElementById('storage').textContent = `üíæ ${Math.round(size/1024)} KB`;
                
                // –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                if ('Notification' in window && Notification.permission === 'default') {
                    Notification.requestPermission();
                }
            }
        }
        
        // ==================== –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ====================
        
        const calc = new Calculator();
        window.calc = calc;
        
        // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç
        calc.calculate();
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫
        setInterval(() => calc.updateStatus(), 30000);
        
        console.log('üöÄ PWA –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–µ–ø—Å–∏—Å–∞ –∑–∞–ø—É—â–µ–Ω!');
        console.log('–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: calc.demo(), calc.clear(), calc.save()');
    </script>
</body>
</html>
